<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Uoise</title>

    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />
  
    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

    <!-- tailwind-->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tosast Syntax -->
    <link rel="stylesheet"
      href="https://uicdn.toast.com/editor-plugin-code-syntax-highlight/latest/toastui-editor-plugin-code-syntax-highlight.min.css">
    <script
      src="https://uicdn.toast.com/editor-plugin-code-syntax-highlight/latest/toastui-editor-plugin-code-syntax-highlight-all.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
    <!-- Tosast Syntax -->
  
    <!-- katex -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.13/katex.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.13/katex.min.css">
    <!-- katex -->
  
    <!-- uml -->
    <script src="https://uicdn.toast.com/editor-plugin-uml/latest/toastui-editor-plugin-uml.min.js"></script>
    <!-- uml -->
    <script>
      const Editor = toastui.Editor;
  
      function katexPlugin() {
        const toHTMLRenderers = {
          katex(node) {
            console.log("HI");
            let html = katex.renderToString(node.literal, {
              throwOnError: false
            });
  
            return [{
              type: "openTag",
              tagName: "div",
              outerNewLine: true
            },
            {
              type: "html",
              content: html
            },
            {
              type: "closeTag",
              tagName: "div",
              outerNewLine: true
            }
            ];
          }
        };
        return {
          toHTMLRenderers
        };
      }
  
      const viewer1MarkdownSource = "로딩중...";
  
      const viewer1 = Editor.factory({
        el: document.querySelector("#viewer-1"),
        viewer: true,
        initialValue: viewer1MarkdownSource,
        plugins: [
          [toastui.Editor.plugin.codeSyntaxHighlight, {
            highlighter: Prism
          }],
          katexPlugin,
          [
            toastui.Editor.plugin.uml,
            {
              rendererURL: "http://www.plantuml.com/plantuml/svg/"
            }
          ]
        ]
      });
  
      function showPage(el) {
        $(el).addClass('text-red-500');
        $(el).parent().siblings().find(' > a').removeClass('text-red-500');
  
        const pageNo = $(el).find(' > span:first-child').text();
        const subject = $(el).find(' > span:nth-child(2)').text();
        const createDate = $(el).find(' > span:nth-child(3)').text();
  
        $('.current-page-no').html(pageNo);
        $('.current-page-subject').html(subject);
        $('.current-page-createDate').html(createDate);
  
        fetch(pageNo + ".md")
          .then(response => response.text()) // 응답에서 본문만 취한다.
          .then(text => {
            viewer1.setMarkdown(text);
            window.scrollTo({
              top: 0,
              behavior: "smooth"
            });
          })
      }
  
      const params = new URL(document.location).searchParams;
      const paramId = params.get("id");
  
      if ($('.data-id-' + paramId).length == 1) {
        $('.data-id-' + paramId).parent().click();
      } else {
        $('.list > li:first-child > a').click();
      }
    </script>
  
  </body>
  
  </html>