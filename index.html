<!DOCTYPE html>
<meta lang="ko" />
<title>Lion Blog Repo</title>

<head>
  <!-- <link rel="stylesheet" href="style.css" /> -->
    <!-- Toast UI -->
    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
    <link
      rel="stylesheet"
      href="https://uicdn.toast.com/editor/latest/toastui-editor-viewer.min.css"
    />
    <!-- Toast UI -->
  
    <!-- prism.js -->
    <link
      rel="stylesheet"
      href="https://uicdn.toast.com/editor-plugin-code-syntax-highlight/latest/toastui-editor-plugin-code-syntax-highlight.min.css"
    />
    <script src="https://uicdn.toast.com/editor-plugin-code-syntax-highlight/latest/toastui-editor-plugin-code-syntax-highlight-all.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css"
    />
    <!-- prism.js -->
  
    <!-- katex -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.13/katex.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.13/katex.min.css"
    />
    <!-- katex -->
  
    <!-- Toast UML -->
    <script src="https://uicdn.toast.com/editor-plugin-uml/latest/toastui-editor-plugin-uml.min.js"></script>
    <!-- Toast UML -->
  <style>
      @font-face {
      font-family: "GmarketSansMedium";
      src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff")
        format("woff");
      font-weight: normal;
      font-style: normal;
    }

    #viewer-1 {
      padding: 10px;
    }

    body {
      margin: 0;
    }

    html > body,
    html > body .toastui-editor-contents {
      font-family: "GmarketSansMedium";
    }
  </style>
</head>
<body>
  <template id="viewer-1-template">
    # h1 
    ## h2 
    - 하하 
    - 호호 
    - 히히 

    # prism.js 
    ```java 
    int a = 10; 
    int b = 20;
    System.out.println(a + b); 
    ``` 

    # Katex 
    $$katex 
    x^2 + y^2 = 1 
    $$ 

    ```html
    <script src="경로"></script>
    ``` 

    $$uml
    (First usecase)
    (Another usecase) as (UC2)
    usecase UC3
    usecase (Last\nusecase) as UC4
    $$
    
  </template>
  <div id="viewer-1"></div>


  <script>
    function stripIndent(str) {
      const lines = str.split("\n");
      let minIndent = Infinity;

      for (let i = 1; i < lines.length; i++) {
        const line = lines[i];
        const indent = line.search(/\S/);

        if (indent !== -1 && indent < minIndent) {
          minIndent = indent;
        }
      }

      if (minIndent !== Infinity) {
        for (let i = 0; i < lines.length; i++) {
          lines[i] = lines[i].slice(minIndent);
        }
      }

      return lines.join("\n");
    }

    const Editor = toastui.Editor;

    function katexPlugin() {
      const toHTMLRenderers = {
        katex(node) {
          console.log("HI");

          let html = katex.renderToString(node.literal, {
            throwOnError: false,
          });

          return [
            { type: "openTag", tagName: "div", outerNewLine: true },
            { type: "html", content: html },
            { type: "closeTag", tagName: "div", outerNewLine: true },
          ];
        },
      };

      return { toHTMLRenderers };
    }

    const viewer1TemplateEl = document.querySelector("#viewer-1-template");
    const viewer1MarkdownSource = stripIndent(viewer1TemplateEl.innerHTML);

    console.log("viewer1MarkdownSource : " + viewer1MarkdownSource);

    const viewer1 = Editor.factory({
      el: document.querySelector("#viewer-1"),
      viewer: true,
      initialValue: viewer1MarkdownSource,
      plugins: [
        [toastui.Editor.plugin.codeSyntaxHighlight, { highlighter: Prism }],
        katexPlugin,
        [
          toastui.Editor.plugin.uml,
          { rendererURL: "http://www.plantuml.com/plantuml/svg/" },
        ],
      ],
    });
  </script>
</body>
